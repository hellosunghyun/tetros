; ==============================================================================
; 추가 기능 코드 (미사용 - 주석 처리됨)
; ==============================================================================
; 이 파일은 테트로스에 추가할 수 있는 기능들의 프로토타입 코드입니다.
; 부트섹터의 446바이트 제한으로 인해 현재는 사용되지 않습니다.
;
; 포함된 기능:
; 1. 게임 오버 화면 표시 및 재시작
; 2. 시작 애니메이션 (타이핑 효과)
;
; 이 기능들을 활성화하려면 코드 크기를 줄이거나,
; 멀티 섹터 부트로더로 확장해야 합니다.
; ==============================================================================

; ==============================================================================
; 게임 오버 기능 (미구현)
; ==============================================================================
; 게임 오버 시 메시지를 표시하고 키 입력을 기다린 후 게임을 재시작합니다.
;
; 기능:
; - "GAME OVER!" 메시지를 화면 중앙에 표시
; - 키보드 입력을 기다림
; - 키 입력 시 게임 재시작
; ==============================================================================

; game_over:
;	; --- 게임 오버 메시지 출력 설정 ---
; 	mov cx, 10                   ; 문자열 길이 = 10 ("GAME OVER!")
; 	mov dx, 0x0323               ; 출력 위치: DH=3 (행), DL=35 (열)
; 	mov bx, 0x8c                 ; 색상 속성: 0x8C = 밝은 빨강 (점멸)
; 	                             ; 상위 니블(8): 배경=검정+점멸
; 	                             ; 하위 니블(C): 전경=밝은 빨강
;
;	; --- BIOS 문자열 출력 함수 호출 준비 ---
; 	mov bp, game_over_msg + 0x7c00  ; ES:BP = 문자열 주소
; 	                                 ; MBR은 0x7C00에 로드되므로 오프셋 추가
; 	mov ax, 0x1300               ; AH=13h (문자열 출력), AL=00h (커서 이동 안 함)
; 	int 0x10                     ; BIOS 비디오 인터럽트 호출
;
;	; --- 키보드 입력 대기 ---
; 	xor ax, ax                   ; AH=0: 키보드 입력 대기 함수
; 	int 16h                      ; 키 입력이 있을 때까지 대기
;
;	; --- 게임 재시작 ---
; 	jmp start_tetris             ; 게임 시작 지점으로 점프

; --- 게임 오버 메시지 문자열 ---
; game_over_msg: db "GAME OVER!"   ; 10바이트 문자열 (널 종료 없음)

; ==============================================================================
; 시작 애니메이션 기능 (미구현)
; ==============================================================================
; 게임 시작 전 환영 메시지를 타이핑 효과로 표시합니다.
;
; 기능:
; - "Let's play tetris ..." 메시지를 한 글자씩 출력
; - 각 글자 출력 후 짧은 딜레이
; - 키보드 입력을 기다린 후 게임 시작
;
; 구현 방법:
; - LODSB 명령으로 문자열에서 한 글자씩 로드
; - BIOS INT 10h로 문자 출력
; - cursor_right 함수로 커서 이동
; - wait_abit 함수로 딜레이 추가
; ==============================================================================

initial_animation:
;	; --- 화면 초기화 ---
;	call clear_screen            ; 화면 지우기 및 커서 숨기기

;	; --- 커서 위치 설정 (화면 중앙 부근) ---
;	mov ah, 2                    ; BIOS 함수: 커서 위치 설정
;	xor bx, bx                   ; BH=0 (페이지 0)
;	mov dh, 5                    ; 행 = 5
;	mov dl, 10                   ; 열 = 10
;	int 0x10                     ; 커서 이동

;	; --- 메시지 문자열 주소 로드 ---
;	mov si, message + 0x7c00     ; SI = 메시지 시작 주소
;	                             ; MBR 로드 주소(0x7C00) 오프셋 추가 필요

initial_animation_next:
;	; --- 다음 문자 로드 (LODSB: AL = [SI], SI++) ---
;	cld                          ; 방향 플래그 클리어 (SI 증가 방향)
;	lodsb                        ; AL = [SI], SI = SI + 1

;	; --- 널 문자 확인 (문자열 끝) ---
;	cmp al, 0                    ; 널 종료 문자인가?
;	jne initial_animation_do     ; 아니면 문자 출력 계속

;	; --- 문자열 끝: 키 입력 대기 후 복귀 ---
;	xor ax, ax                   ; AH=0: 키보드 입력 대기
;	int 16h                      ; 키 입력 대기
;	ret                          ; 호출자로 복귀

initial_animation_do:
;	; --- 문자 출력 ---
;	mov bx, 0x0a                 ; BH=0 (페이지), BL=0Ah (밝은 녹색)
;	mov cx, 1                    ; 출력 횟수 = 1
;	mov ah, 9                    ; BIOS 함수: 커서 위치에 문자와 속성 출력
;	int 0x10                     ; AL의 문자를 BL 색상으로 출력

;	; --- 커서를 오른쪽으로 이동 ---
;	call cursor_right            ; 커서를 한 칸 오른쪽으로 (별도 함수 필요)

;	; --- 타이핑 효과를 위한 딜레이 ---
;	push dx                      ; DX 레지스터 저장 (커서 위치 보존)
;	mov cx, 2                    ; 대기 시간: 2 × 65536 마이크로초 ≈ 131ms
;	xor dx, dx                   ; DX=0 (하위 대기 시간)
;	call wait_abit               ; 딜레이 함수 호출 (별도 구현 필요)
;	pop dx                       ; DX 복원

;	; --- 다음 문자 처리 ---
;	jmp initial_animation_next   ; 루프 반복

; --- 환영 메시지 문자열 ---
; message:     db "Let's play tetris ...", 0   ; 널 종료 문자열 (22바이트)
;
; 참고:
; - cursor_right: 커서를 오른쪽으로 한 칸 이동하는 함수 (별도 구현 필요)
; - wait_abit: CX:DX 마이크로초만큼 대기하는 함수 (INT 15h, AH=86h 사용)
